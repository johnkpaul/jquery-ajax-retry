!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof exports?require("jquery"):jQuery)}(function(a){function b(b,c,d){var e=c.times,f=b.timeout;return function(g,h,i){function j(){a.ajax(d).retry({times:e-1,timeout:c.timeout,statusCodes:c.statusCodes}).pipe(k.resolve,k.reject)}var k=new a.Deferred,l=b.getResponseHeader("Retry-After");return e>1&&(!b.statusCodes||a.inArray(g.status,b.statusCodes)>-1)?(l&&(f=isNaN(l)?new Date(l).getTime()-a.now():1e3*parseInt(l,10),(isNaN(f)||0>f)&&(f=b.timeout)),void 0!==f?setTimeout(j,f):j()):k.rejectWith(this,arguments),k}}a.ajaxPrefilter(function(a,c,d){d.retry=function(a){return a.timeout&&(this.timeout=a.timeout),a.statusCodes&&(this.statusCodes=a.statusCodes),this.pipe(null,b(this,a,c))}})});